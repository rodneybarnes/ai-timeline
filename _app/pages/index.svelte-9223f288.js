var fe=Object.defineProperty,he=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var X=(r,e,t)=>e in r?fe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,K=(r,e)=>{for(var t in e||(e={}))de.call(e,t)&&X(r,t,e[t]);if(W)for(var t of W(e))ge.call(e,t)&&X(r,t,e[t]);return r},z=(r,e)=>he(r,me(e));var _e=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var D=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)};var I=(r,e,t)=>(_e(r,e,"access private method"),t);import{L as pe,S as k,i as F,s as V,e as _,t as T,c as p,a as b,h as w,d,g as x,J as g,j as A,b as E,M as be,N as Z,O as R,K as $,P as G,Q as ve,R as oe,T as ye,w as C,x as O,y as M,q as y,o as P,B as S,k as U,m as Y,n as ce,p as ue,U as Ee,V as Pe}from"../chunks/vendor-57d9f149.js";import{c as N}from"../chunks/singletons-d1fb5791.js";const Te=async r=>await(await r("https://opensheet.elk.sh/1xOrcYodnYn-mR9WCXsD-x6JxNWusemQD4gXuArqvaeA/Sheet1")).json(),we=()=>{const r=pe("__svelte__");return{page:{subscribe:r.page.subscribe},navigating:{subscribe:r.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:r.navigating.subscribe}},session:r.session,updated:r.updated}},$e={subscribe(r){return we().page.subscribe(r)}};N.disable_scroll_handling;const ee=N.goto;N.invalidate;N.prefetch;N.prefetch_routes;N.before_navigate;N.after_navigate;function te(r,e,t){const n=r.slice();return n[5]=e[t],n}function re(r){let e,t=r[5]+"",n,l;return{c(){e=_("option"),n=T(t),this.h()},l(o){e=p(o,"OPTION",{});var i=b(e);n=w(i,t),i.forEach(d),this.h()},h(){e.__value=l=r[5],e.value=e.__value},m(o,i){x(o,e,i),g(e,n)},p(o,i){i&2&&t!==(t=o[5]+"")&&A(n,t),i&2&&l!==(l=o[5])&&(e.__value=l,e.value=e.__value)},d(o){o&&d(e)}}}function xe(r){let e,t,n,l=r[1].name+"",o,i,f,a=r[1].values,s=[];for(let m=0;m<a.length;m+=1)s[m]=re(te(r,a,m));return{c(){e=_("select"),t=_("option"),n=T("Filter by "),o=T(l);for(let m=0;m<s.length;m+=1)s[m].c();this.h()},l(m){e=p(m,"SELECT",{class:!0});var h=b(e);t=p(h,"OPTION",{});var u=b(t);n=w(u,"Filter by "),o=w(u,l),u.forEach(d);for(let c=0;c<s.length;c+=1)s[c].l(h);h.forEach(d),this.h()},h(){t.__value="",t.value=t.__value,E(e,"class","mr-3"),r[0]===void 0&&be(()=>r[3].call(e))},m(m,h){x(m,e,h),g(e,t),g(t,n),g(t,o);for(let u=0;u<s.length;u+=1)s[u].m(e,null);Z(e,r[0]),i||(f=[R(e,"change",r[3]),R(e,"change",r[2])],i=!0)},p(m,[h]){if(h&2&&l!==(l=m[1].name+"")&&A(o,l),h&2){a=m[1].values;let u;for(u=0;u<a.length;u+=1){const c=te(m,a,u);s[u]?s[u].p(c,h):(s[u]=re(c),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=a.length}h&3&&Z(e,m[0])},i:$,o:$,d(m){m&&d(e),G(s,m),i=!1,ve(f)}}}function Ne(r,e,t){let{filter:n={name:"",values:[]}}=e,{selectedValue:l}=e;const o=oe(),i=()=>o("filterUpdated",{filterName:n.name,selectedValue:l});function f(){l=ye(this),t(0,l),t(1,n)}return r.$$set=a=>{"filter"in a&&t(1,n=a.filter),"selectedValue"in a&&t(0,l=a.selectedValue)},[l,n,i,f]}class ke extends k{constructor(e){super();F(this,e,Ne,xe,V,{filter:1,selectedValue:0})}}function ne(r,e,t){const n=r.slice();return n[6]=e[t],n}function le(r){var l;let e,t;function n(...o){return r[3](r[6],...o)}return e=new ke({props:{filter:r[6],selectedValue:((l=r[1].find(n))==null?void 0:l.value)||""}}),e.$on("filterUpdated",r[4]),{c(){C(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,i){M(e,o,i),t=!0},p(o,i){var a;r=o;const f={};i&1&&(f.filter=r[6]),i&3&&(f.selectedValue=((a=r[1].find(n))==null?void 0:a.value)||""),e.$set(f)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){S(e,o)}}}function Fe(r){let e,t,n,l,o,i,f,a=r[0],s=[];for(let h=0;h<a.length;h+=1)s[h]=le(ne(r,a,h));const m=h=>P(s[h],1,1,()=>{s[h]=null});return{c(){e=_("div");for(let h=0;h<s.length;h+=1)s[h].c();t=U(),n=_("button"),l=T("Clear"),this.h()},l(h){e=p(h,"DIV",{class:!0});var u=b(e);for(let v=0;v<s.length;v+=1)s[v].l(u);t=Y(u),n=p(u,"BUTTON",{class:!0});var c=b(n);l=w(c,"Clear"),c.forEach(d),u.forEach(d),this.h()},h(){E(n,"class","bg-white px-5"),E(e,"class","flex flex-row justify-end pb-10 px-5 bg-slate-800")},m(h,u){x(h,e,u);for(let c=0;c<s.length;c+=1)s[c].m(e,null);g(e,t),g(e,n),g(n,l),o=!0,i||(f=R(n,"click",r[2]),i=!0)},p(h,[u]){if(u&3){a=h[0];let c;for(c=0;c<a.length;c+=1){const v=ne(h,a,c);s[c]?(s[c].p(v,u),y(s[c],1)):(s[c]=le(v),s[c].c(),y(s[c],1),s[c].m(e,t))}for(ce(),c=a.length;c<s.length;c+=1)m(c);ue()}},i(h){if(!o){for(let u=0;u<a.length;u+=1)y(s[u]);o=!0}},o(h){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)P(s[u]);o=!1},d(h){h&&d(e),G(s,h),i=!1,f()}}}function Ve(r,e,t){let{filters:n=[]}=e,{filterParams:l=[]}=e;const o=oe(),i=()=>o("clearParams"),f=(s,m)=>m.by===s.name;function a(s){Ee.call(this,r,s)}return r.$$set=s=>{"filters"in s&&t(0,n=s.filters),"filterParams"in s&&t(1,l=s.filterParams)},[n,l,i,f,a]}class De extends k{constructor(e){super();F(this,e,Ve,Fe,V,{filters:0,filterParams:1})}}function Ie(r){let e,t,n;return{c(){e=_("div"),t=_("h1"),n=T("Timeline of AI in Montreal"),this.h()},l(l){e=p(l,"DIV",{class:!0});var o=b(e);t=p(o,"H1",{class:!0});var i=b(t);n=w(i,"Timeline of AI in Montreal"),i.forEach(d),o.forEach(d),this.h()},h(){E(t,"class","font-mono text-4xl text-white"),E(e,"class","flex items-center justify-center bg-gradient-to-b from-slate-700 to-slate-800 h-80 min-h-[30%]")},m(l,o){x(l,e,o),g(e,t),g(t,n)},p:$,i:$,o:$,d(l){l&&d(e)}}}class Ae extends k{constructor(e){super();F(this,e,null,Ie,V,{})}}function Ce(r){let e,t,n,l,o,i=r[0].headline+"",f,a,s,m=r[0].text+"",h;return{c(){e=_("div"),t=_("p"),n=T(r[1]),l=U(),o=_("h3"),f=T(i),a=U(),s=_("p"),h=T(m),this.h()},l(u){e=p(u,"DIV",{class:!0});var c=b(e);t=p(c,"P",{class:!0});var v=b(t);n=w(v,r[1]),v.forEach(d),l=Y(c),o=p(c,"H3",{class:!0});var L=b(o);f=w(L,i),L.forEach(d),a=Y(c),s=p(c,"P",{});var Q=b(s);h=w(Q,m),Q.forEach(d),c.forEach(d),this.h()},h(){E(t,"class","mb-2 text-sm"),E(o,"class","mb-3 text-xl"),E(e,"class","p-10 sm:mb-2 md:-mt-4 text-white border-2 border-white rounded md:min-w-[45%] md:max-w-[45%] "+r[2])},m(u,c){x(u,e,c),g(e,t),g(t,n),g(e,l),g(e,o),g(o,f),g(e,a),g(e,s),g(s,h)},p(u,[c]){c&2&&A(n,u[1]),c&1&&i!==(i=u[0].headline+"")&&A(f,i),c&1&&m!==(m=u[0].text+"")&&A(h,m)},i:$,o:$,d(u){u&&d(e)}}}function Oe(r,e,t){let n,l,{entry:o={month:0,year:0,headline:"",text:"",group:"",type:"",endYear:0}}=e,{index:i=0}=e;const f={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},a=i%2===0?"md:ml-[50%]":"md:mr-[50%]";return r.$$set=s=>{"entry"in s&&t(0,o=s.entry),"index"in s&&t(3,i=s.index)},r.$$.update=()=>{r.$$.dirty&1&&t(4,n=f[o.month]?f[o.month]+", ":""),r.$$.dirty&17&&t(1,l=`${o.day} ${n} ${o.year}`)},[o,l,a,i,n]}class Me extends k{constructor(e){super();F(this,e,Oe,Ce,V,{entry:0,index:3})}}function se(r,e,t){const n=r.slice();return n[1]=e[t],n[3]=t,n}function ae(r){let e,t;return e=new Me({props:{entry:r[1],index:r[3]}}),{c(){C(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,l){M(e,n,l),t=!0},p(n,l){const o={};l&1&&(o.entry=n[1]),e.$set(o)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Se(r){let e,t,n=r[0],l=[];for(let i=0;i<n.length;i+=1)l[i]=ae(se(r,n,i));const o=i=>P(l[i],1,1,()=>{l[i]=null});return{c(){e=_("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=p(i,"DIV",{class:!0});var f=b(e);for(let a=0;a<l.length;a+=1)l[a].l(f);f.forEach(d),this.h()},h(){E(e,"class","flex flex-col items-center flex-grow bg-slate-800")},m(i,f){x(i,e,f);for(let a=0;a<l.length;a+=1)l[a].m(e,null);t=!0},p(i,[f]){if(f&1){n=i[0];let a;for(a=0;a<n.length;a+=1){const s=se(i,n,a);l[a]?(l[a].p(s,f),y(l[a],1)):(l[a]=ae(s),l[a].c(),y(l[a],1),l[a].m(e,null))}for(ce(),a=n.length;a<l.length;a+=1)o(a);ue()}},i(i){if(!t){for(let f=0;f<n.length;f+=1)y(l[f]);t=!0}},o(i){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)P(l[f]);t=!1},d(i){i&&d(e),G(l,i)}}}function Ue(r,e,t){let{entries:n=[]}=e;return r.$$set=l=>{"entries"in l&&t(0,n=l.entries)},[n]}class Ye extends k{constructor(e){super();F(this,e,Ue,Se,V,{entries:0})}}class ie{constructor(e,t){this.name=e,this.values=t}}var B,Je,J,je,j,He;class Be{constructor(e){D(this,B);D(this,J);D(this,j);this.data=e.map(I(this,B,Je))}get eras(){return this.data.filter(e=>e.type==="era")}get groups(){return[...new Set(this.data.filter(e=>e.group!==void 0).map(e=>e.group))]}get entries(){return this.data.filter(e=>e.type===void 0||e.type==="")}filterEntries(e){let t=[...this.entries];return e.forEach(n=>{switch(n.by){case"era":t=I(this,J,je).call(this,n.value,t);break;case"group":t=I(this,j,He).call(this,n.value,t);break}}),t}}B=new WeakSet,Je=function(e){return z(K({},e),{day:e.Day&&Number(e.Day),month:e.Month&&Number(e.Month),year:Number(e.Year),headline:e.Headline,text:e.Text,group:e.Group,type:e.Type,endYear:Number(e["End Year"])})},J=new WeakSet,je=function(e,t){if(!e)return t;const n=this.eras.find(l=>l.headline===e);if(!n)throw new Error(`Invalid era passed to filter: ${e}`);return t.filter(l=>Number(l.year)>=Number(n.year)&&Number(l.year)<=Number(n.endYear))},j=new WeakSet,He=function(e,t){return e?t.filter(n=>n.group===e):t};var H,Re;class q{static getFilterParams(e){return e.map(I(this,H,Re))}}H=new WeakSet,Re=function([e,t]){return{by:e,value:t}},D(q,H);function qe(r){let e,t,n,l,o,i,f;return t=new Ae({}),l=new De({props:{filters:r[2],filterParams:r[0]}}),l.$on("filterUpdated",r[3]),l.$on("clearParams",r[4]),i=new Ye({props:{entries:r[1]}}),{c(){e=_("div"),C(t.$$.fragment),n=U(),C(l.$$.fragment),o=U(),C(i.$$.fragment),this.h()},l(a){e=p(a,"DIV",{class:!0});var s=b(e);O(t.$$.fragment,s),n=Y(s),O(l.$$.fragment,s),o=Y(s),O(i.$$.fragment,s),s.forEach(d),this.h()},h(){E(e,"class","flex flex-col h-screen")},m(a,s){x(a,e,s),M(t,e,null),g(e,n),M(l,e,null),g(e,o),M(i,e,null),f=!0},p(a,[s]){const m={};s&1&&(m.filterParams=a[0]),l.$set(m);const h={};s&2&&(h.entries=a[1]),i.$set(h)},i(a){f||(y(t.$$.fragment,a),y(l.$$.fragment,a),y(i.$$.fragment,a),f=!0)},o(a){P(t.$$.fragment,a),P(l.$$.fragment,a),P(i.$$.fragment,a),f=!1},d(a){a&&d(e),S(t),S(l),S(i)}}}const Xe=!1;async function Ke({fetch:r}){return{props:{rawTimelineData:await Te(r)}}}function Ge(r,e,t){let n;Pe(r,$e,c=>t(6,n=c));let{rawTimelineData:l}=e;const o=new Be(l),i=new ie("era",o.eras.map(c=>c.headline)),f=new ie("group",o.groups),a=[i,f];let s=q.getFilterParams(Array.from(n.url.searchParams.entries())),m=o.filterEntries(s);const h=({detail:{filterName:c,selectedValue:v}})=>{n.url.searchParams.set(c,v),ee(n.url.href),t(0,s=q.getFilterParams(Array.from(n.url.searchParams.entries()))),t(1,m=o.filterEntries(s))},u=()=>{Array.from(n.url.searchParams.keys()).forEach(c=>n.url.searchParams.delete(c)),ee(n.url.href),t(0,s=[]),t(1,m=[...o.entries])};return r.$$set=c=>{"rawTimelineData"in c&&t(5,l=c.rawTimelineData)},[s,m,a,h,u,l]}class ze extends k{constructor(e){super();F(this,e,Ge,qe,V,{rawTimelineData:5})}}export{ze as default,Ke as load,Xe as prerender};
